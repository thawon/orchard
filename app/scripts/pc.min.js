!function(){"use strict";angular.module("orchard",["ui.router","breeze.angular","ngResource","ngProgress","ngCookies","toaster","ui.tree","orchard.application","orchard.navigator","orchard.dashboard","orchard.login","orchard.authorisation-constant","orchard.state-change-service","orchard.auth-interceptor-service"]).config(["$locationProvider","$stateProvider","$urlRouterProvider","$httpProvider","AUTHORISATION",function(a,b,c,d,e){a.html5Mode({enabled:!0}),c.otherwise(e.STATES.otherwise),e.STATES.states.map(function(a){b.state(a.name,{url:a.url,templateUrl:a.templateUrl,controller:a.controller,data:a.data})}),d.interceptors.push("AuthInterceptor")}]).run(["breeze","$rootScope","StateChangeService","ngProgress",function(a,b,c,d){b.$on("$stateChangeStart",function(a,b){c.change(b.data.authorizedRoles)}),b.$on("$stateChangeSuccess",function(a,b){d.complete()})}])}(),function(){"use strict";function a(a,b,c,d,e,f,g){b.color(c.progress.color),d.authenticated().then(function(b){var c;b.success&&(c=b.user,e.setCurrentUser(c),f.getUser(c._id).then(function(b){e.setCurrentUser(b),a.$broadcast(g.authenticated)}))})}angular.module("orchard.application",["ngProgress","orchard.app-configuration-service","orchard.auth-service","orchard.user-service","orchard.user-profile-service","orchard.auth-events-constant"]).controller("ApplicationController",a),a.$inject=["$rootScope","ngProgress","AppConfigurationService","AuthService","UserService","UserProfileService","AUTH_EVENTS"]}(),function(){"use strict";function a(a,b){function c(){return a.show}var d=this;d.mode=c,d.data=b.getClients()}angular.module("orchard.dashboard",["orchard.view-modes-constant","orchard.client-service","orchard.entity-detail-container","orchard.expandable-container"]).controller("DashboardController",a),a.$inject=["VIEW_MODES","ClientService"]}(),function(){"use strict";function a(a,b,c,d,e,f,g,h){function i(){c.changeState("dashboard")}var j=this,k="waitingId",l={type:"success",body:"logged in successfully",timeout:2e3},m={type:"wait",body:"logging in...",toastId:k,toasterId:k},n={type:"error",body:"logged in unsuccessfully"};j.credentials={email:f.empty,password:f.empty},j.errorMessage=null,j.login=function(c){b.login(c).then(function(b){h.pop(m),d.setCurrentUser(b),g.getUser(b._id).then(function(b){h.clear(k,k),d.setCurrentUser(b),a.$broadcast(e.loginSuccess),i(),h.pop(l)})})},a.$on(e.notAuthenticated,function(){h.clear(k,k),h.pop(n),j.errorMessage="The email or password you entered is incorrect."}),b.isAuthenticated()&&i()}angular.module("orchard.login",["orchard.auth-service","orchard.state-service","orchard.user-service","orchard.auth-events-constant","orchard.string-constant","orchard.user-profile-service"]).controller("LoginController",a),a.$inject=["$rootScope","AuthService","StateService","UserService","AUTH_EVENTS","STRING","UserProfileService","toaster"]}(),function(){"use strict";function a(a,b,c,d,e,f,g){function h(){e.logout().then(function(b){f.setCurrentUser(null),a.$broadcast(d.logoutSuccess),g.changeState("signout")})}var i,j=this;j.show=!1,i=_.filter(c.STATES.states,function(a){return-1!==a.data.authorizedRoles.indexOf(c.USER_ROLES.admin)}),j.states=i,j.signout=h,a.$on(d.loginSuccess,function(){j.show=!0}),a.$on(d.authenticated,function(){j.show=!0}),a.$on(d.logoutSuccess,function(){j.show=!1})}angular.module("orchard.navigator",["orchard.app-configuration-service","orchard.authorisation-constant","orchard.auth-events-constant","orchard.auth-service","orchard.user-service","orchard.state-service"]).controller("NavigatorController",a),a.$inject=["$rootScope","AppConfigurationService","AUTHORISATION","AUTH_EVENTS","AuthService","UserService","StateService"]}(),function(){"use strict";function a(a){var b=breeze.DataType,c={model:function(){},getType:function(){return{name:"User",dataProperties:{id:{type:b.MongoObjectId},firstname:{required:!0,max:50},lastname:{required:!0,max:50},userRole:{required:!0,max:10},lastLoggedInDateTime:{type:b.DateTime},email:{required:!0,max:255},account_id:{type:b.MongoObjectId}}}}};return a.defineProperty(c.model,"fullname",function(){return this.firstname+" "+this.lastname}),c}angular.module("orchard.user-model",["orchard.util-service"]).factory("UserModelService",a),a.$inject=["UtilService"]}(),function(){"use strict";function a(a,b){function c(a){return d.fetchEntityByKey("User",a).then(function(a){return a.entity})["catch"](function(a){console.log(a)})}var d=a.getManager(),e={getUser:c};return e}angular.module("orchard.user-profile-service",["orchard.entity-manager-factory"]).factory("UserProfileService",a),a.$inject=["EntityManagerFactory"]}(),function(){"use strict";var a={loginSuccess:"auth-login-success",loginFailed:"auth-login-failed",logoutSuccess:"auth-logout-success",logoutFailed:"auth-logout-failed",sessionTimeout:"auth-session-timeout",authenticated:"auth-authenticated",notAuthenticated:"auth-not-authenticated",notAuthorized:"auth-not-authorized"};angular.module("orchard.auth-events-constant",[]).constant("AUTH_EVENTS",a)}(),function(){"use strict";var a,b,c;a={admin:"admin",all:"*"},b={otherwise:"/",states:[{name:"dashboard",display:"Dashboard",url:"/",templateUrl:"scripts/components/dashboard/dashboard.html",controller:"DashboardController as dashboard",data:{authorizedRoles:[a.admin],page:{title:"Admin Dashboard",description:""}}},{name:"login",url:"/login",templateUrl:"scripts/components/login/login.html",controller:"LoginController as login",data:{authorizedRoles:[a.all],page:{title:"Login",description:"admin user authentication"}}},{name:"signout",url:"/signout",templateUrl:"scripts/components/signout/signout.html",data:{authorizedRoles:[a.all],page:{title:"Signout",description:"User is signed out"}}},{name:"intranet",display:"Intranet",url:"/intranet",templateUrl:"scripts/components/intranet/intranet.html",data:{authorizedRoles:[a.admin],page:{title:"Signout",description:"User is signed out"}}},{name:"project-admin",display:"Project Admin",url:"/project-admin",templateUrl:"scripts/components/project-admin/project-admin.html",data:{authorizedRoles:[a.admin],page:{title:"Signout",description:"User is signed out"}}}]},c={USER_ROLES:a,STATES:b},angular.module("orchard.authorisation-constant",[]).constant("AUTHORISATION",c)}(),function(){"use strict";var a={XS:"xs",S:"sm",M:"md",L:"lg"};angular.module("orchard.device-sizes-constant",[]).constant("DEVICE_SIZES",a)}(),function(){"use strict";var a={empty:""};angular.module("orchard.string-constant",[]).constant("STRING",a)}(),function(){"use strict";var a={show:"show",edit:"edit",create:"create"};angular.module("orchard.view-modes-constant",[]).constant("VIEW_MODES",a)}(),function(){"use strict";function a(a,b,c){return{restrict:"E",transclude:!0,scope:{saveFn:"&",validateFn:"&",cancelFn:"&",modeFn:"&"},link:function(d,e,f){function g(){j(b.show)()}function h(){c.history.back()}function i(){var a=$(e),b=a.find(".view-detail").find("[data-mode]");return b}function j(a){return function(){var b=$(e),c=i(),f=b.find(".view-detail").find("[data-mode='"+a+"']");$(c).hide(),$(f).show(),d.mode=a}}function k(b){return function(){var c="waitingId",e={type:"success",body:"saved successfully",timeout:2e3},f={type:"wait",body:"saving...",toastId:c,toasterId:c},g={type:"error",body:"saved unsuccessfully"},h=d.validateFn();return h.hasError?(a.pop(g),void m(h.Errors)):(n.html(""),a.pop(f),void d.saveFn().then(function(d){return a.clear(c,c),a.pop(e),b(),d})["catch"](function(b){return a.clear(c,c),a.pop(g),console.log(b),b}))}}function l(){d.cancelFn(),j(b.show)()}function m(a){var b=a.join("</br>");n.html(b)}var n=e.find(".view-detail-error");d.edit=j(b.edit),d.cancel=l,d.save=k(g),d.saveAndClose=k(h),j(d.modeFn())()},templateUrl:"scripts/directives/entity-detail-container/entity-detail-container.html"}}angular.module("orchard.entity-detail-container",["orchard.view-modes-constant","orchard.export-service"]).directive("pcdEntityDetailContainer",a),a.$inject=["toaster","VIEW_MODES","ExportService"]}(),function(){"use strict";function a(){return{restrict:"E",transclude:!0,scope:{},link:function(a,b,c){a.expandable="/images/collapse.png",b.find(".exp-header").html(c.header),a.toggle=function(){var c=$(b),d=c.find(".collapse-group").find(".collapse");a.expandable=d.hasClass("collapse in")?"/images/expand.png":"/images/collapse.png",d.collapse("toggle")}},templateUrl:"scripts/directives/expandable-container/expandable-container.html"}}angular.module("orchard.expandable-container",[]).directive("pcdExpandableContainer",a),a.$inject=[]}(),function(){"use strict";function a(){function a(a){return"api"+a}var b={project:{name:"orchard"},page:{titlePrefix:"orchard"},companyInfo:{name:"orchard"},progress:{color:"#1d9ad9"},getServiceName:a,breezejs:{httpTimeout:1e4}};return b}angular.module("orchard.app-configuration-service",[]).factory("AppConfigurationService",a),a.$inject=[]}(),function(){"use strict";function a(a,b,c){return{responseError:function(d){return a.$broadcast({401:c.notAuthenticated,403:c.notAuthorized,419:c.sessionTimeout,440:c.sessionTimeout}[d.status],d),b.reject(d)}}}angular.module("orchard.auth-interceptor-service",["orchard.auth-events-constant"]).factory("AuthInterceptor",a),a.$inject=["$rootScope","$q","AUTH_EVENTS"]}(),function(){"use strict";function a(a,b,c){function d(b){var c={id:b.id,userRole:b.userRole};a.setCookie("user",c)}function e(a){return b.post(l("/login"),a).then(function(a){var b=a.data;return d(b.user),b.user})}function f(){return b.post(l("/logout")).then(function(b){var c=b.data;return c.success&&a.removeCookie("user"),c})}function g(){return a.removeCookie("user"),b.post(l("/authenticated")).then(function(a){var b=a.data;return b.success&&d(b.user),b})}function h(){return!!k.getCurrentUser()}function i(a){var b=k.getCurrentUser();return angular.isArray(a)||(a=[a]),k.isAuthenticated()&&-1!==a.indexOf(b.userRole)}function j(){return a.getCookie("user")}var k={login:e,logout:f,authenticated:g,isAuthenticated:h,isAuthorized:i,getCurrentUser:j},l=c.getServiceName;return k}angular.module("orchard.auth-service",["orchard.cookie-service","orchard.app-configuration-service"]).factory("AuthService",a),a.$inject=["CookieService","$http","AppConfigurationService"]}(),function(){"use strict";function a(){function a(){return[{id:1,title:"AMC",nodes:[]},{id:2,title:"Belersdorf",nodes:[]},{id:3,title:"DST",nodes:[]},{id:4,title:"Eletrolux",nodes:[]},{id:5,title:"Fox",nodes:[]},{id:6,title:"Galderma",nodes:[]},{id:7,title:"Investa",nodes:[]},{id:8,title:"MCN",nodes:[]},{id:9,title:"Merisant",nodes:[{id:91,title:"Equal - APAC",nodes:[{id:911,title:"Design",nodes:[]},{id:912,title:"Stage",nodes:[]}]}]},{id:10,title:"Orchard",nodes:[]},{id:11,title:"Pfizer",nodes:[]},{id:12,title:"Variety",nodes:[]},{id:13,title:"Video Ezy",nodes:[]}]}var b={getClients:a};return b}angular.module("orchard.client-service",[]).factory("ClientService",a),a.$inject=[]}(),function(){"use strict";function a(){function a(a){var b=localStorage.getItem(a);return b?JSON.parse(b):null}function b(a,b){localStorage.setItem(a,JSON.stringify(b))}function c(a){localStorage.removeItem(a)}var d={getCookie:a,setCookie:b,removeCookie:c};return d}angular.module("orchard.cookie-service",[]).factory("CookieService",a),a.$inject=[]}(),function(){"use strict";function a(a){function b(a){return function(){return c.saveChanges()}}var c=a.getManager(),d={saveChanges:b};return d}angular.module("orchard.data-service",["orchard.entity-manager-factory"]).factory("DataService",a),a.$inject=["EntityManagerFactory"]}(),function(){"use strict";function a(a,b){function c(){breeze.config.initializeAdapterInstance("dataService","mongo",!0),f("0"),h=new breeze.DataService({serviceName:b.getServiceName("")})}function d(){return i||(i=k.newManager())}function e(){var b=a.getMetadataStore();return b.addDataService(h),b}function f(a){var b=breeze.config.getAdapterInstance("ajax");b.defaultSettings={headers:{"X-UserSessionId":a},timeout:l.httpTimeout}}function g(){return new breeze.EntityManager({dataService:h,metadataStore:j})}var h,i,j,k,l=b.breezejs;return c(),j=e(),k={getManager:d,newManager:g}}angular.module("orchard.entity-manager-factory",["orchard.model","orchard.app-configuration-service"]).factory("EntityManagerFactory",a),a.$inject=["model","AppConfigurationService"]}(),function(){"use strict";function a(){return window}angular.module("orchard.export-service",[]).factory("ExportService",a),a.$inject=[]}(),function(){"use strict";function a(a){function b(){var b=c(),e=new breeze.MetadataStore({namingConvention:b});return d(e,a),e}function c(){var a=new breeze.NamingConvention({serverPropertyNameToClient:function(a){switch(a){case"_id":return"id";default:return a}},clientPropertyNameToServer:function(a){switch(a){case"id":return"_id";default:return a}}});return a}function d(a,b){var c=breeze.AutoGeneratedKeyType.None,d="Pineapple.Model",e=new breeze.config.MetadataHelper(d,c),f=function(b){e.addTypeToStore(a,b)};f(b.getType())}return{createMetadataStore:b}}angular.module("orchard.meta-data",["orchard.user-model"]).factory("metadata",a),a.$inject=["UserModelService"]}(),function(){"use strict";function a(a,b){function c(){var c=a.createMetadataStore(),d=c.registerEntityTypeCtor.bind(c);return d("User",b.model),c}var d={getMetadataStore:c};return d}angular.module("orchard.model",["orchard.meta-data","orchard.user-model"]).factory("model",a),a.$inject=["metadata","UserModelService"]}(),function(){"use strict";function a(a){var b={home:{name:"home",display:"Home",path:"/"},services:{name:"services",display:"Services",path:"/services"},photos:{name:"photos",display:"Photos",path:"/photos"},philosophy:{name:"philosophy",display:"Philosophy",path:"/philosophy"},contact:{name:"contact",display:"Contact",path:"/contact"}},c={items:b,pages:{main:{name:"main",display:"Menu",items:[b.home,b.services,b.photos,b.philosophy,b.contact]},about:{name:"about",display:"About",items:[b.contact,b.philosophy]}}};return c}angular.module("orchard.navigator-service",["orchard.app-configuration-service"]).factory("NavigatorService",a),a.$inject=["AppConfigurationService"]}(),function(){"use strict";function a(a,b,c,d,e,f){function g(g){g[0]===e.USER_ROLES.all||b.isAuthorized(g)?f.start():(c.changeState("login"),b.isAuthenticated()?a.$broadcast(d.notAuthorized):a.$broadcast(d.notAuthenticated))}var h={change:g};return h}angular.module("orchard.state-change-service",["ngProgress","orchard.state-service","orchard.auth-service","orchard.auth-events-constant","orchard.authorisation-constant"]).factory("StateChangeService",a),a.$inject=["$rootScope","AuthService","StateService","AUTH_EVENTS","AUTHORISATION","ngProgress"]}(),function(){"use strict";function a(a,b){function c(c){var d=_.first(_.where(b.STATES.states,{name:c}));a.path(d.url)}var d={changeState:c};return d}angular.module("orchard.state-service",["orchard.authorisation-constant"]).factory("StateService",a),a.$inject=["$location","AUTHORISATION"]}(),function(){"use strict";function a(){var a,b={getCurrentUser:function(){return a},setCurrentUser:function(b){a=b}};return b}angular.module("orchard.user-service",[]).factory("UserService",a),a.$inject=[]}(),function(){"use strict";function a(){function a(a){return $(".device-"+a).is(":visible")}function b(a,b,c,d){var e={enumerable:!0,get:c};d&&(e.set=d),Object.defineProperty(a.prototype,b,e)}var c={device:{isBreakpoint:a},defineProperty:b};return c}angular.module("orchard.util-service",[]).factory("UtilService",a),a.$inject=[]}();